# 多态

virtual关键字

- 可以修饰成员函数，为了完成虚函数重写，满足多态条件之一。

- 可以在菱形继承中，去完成虚继承，解决数据冗余和二义性。

**多态两个条件：**

- 虚函数的重写
- 父类对象的指针或者引用去调用虚函数

**满足多态**：跟调用对象的类型无关，指向哪个对象就调用它的虚函数

**不满足多态**：对类型有关，调用的类型是谁，就是谁的成员

## 虚函数重写

参数，函数名，返回值都相同，

**协变**：基类与派生类虚函数返回值类型是不同类型对象

```
class A{};
 class B : public A {};
 
class Person {
 public:
    virtual A* f() {return new A;}
 };
 
class Student : public Person {
 public:
    virtual B* f() {return new B;}
 };
```

**析构函数**：函数名不同



## override和final

override修饰虚函数重写

final修饰的虚函数不能重写

- 重载：两个函数在同一作用域，函数名相同参数不同

- 重写：两个虚函数分别在基类和派生类作用域，函数名参数返回值都相同，（协变/析构除外）

- 重定义：两个分别在基类和派生类的同名函数（非virtual虚函数）



## 抽象类

```
 class Car
 {
 public:
    virtual void Drive() = 0;
 };
 //子类重写父类纯虚函数后才能实例化
 class Benz :public Car
 {
 public:
    virtual void Drive()
    {
        cout << "Benz-舒适" << endl;
    }
 };
```

