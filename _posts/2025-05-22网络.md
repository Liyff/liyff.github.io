# 网络

![image-20250628145543647](C:\Users\LIYUFENG\AppData\Roaming\Typora\typora-user-images\image-20250628145543647.png)

## 协议



### 应用层协议

![image-20250628151726478](C:\Users\LIYUFENG\AppData\Roaming\Typora\typora-user-images\image-20250628151726478.png)

### 内核协议栈

![image-20250628152814392](C:\Users\LIYUFENG\AppData\Roaming\Typora\typora-user-images\image-20250628152814392.png)



### 数据的传递

![image-20250628154307252](C:\Users\LIYUFENG\AppData\Roaming\Typora\typora-user-images\image-20250628154307252.png)

#### 如何定位一个主机，                   如何定位一个进程

![image-20250628155126541](C:\Users\LIYUFENG\AppData\Roaming\Typora\typora-user-images\image-20250628155126541.png)

Linux下查看网络

![image-20250628155541705](C:\Users\LIYUFENG\AppData\Roaming\Typora\typora-user-images\image-20250628155541705.png)



## 数据链路层

![image-20250628160409472](C:\Users\LIYUFENG\AppData\Roaming\Typora\typora-user-images\image-20250628160409472.png)

MAC地址

- MTU最大传输单元1500
- 数据链路层帧

![image-20250628161352837](C:\Users\LIYUFENG\AppData\Roaming\Typora\typora-user-images\image-20250628161352837.png)

#### ARP协议

- 先广播一个ARP请求，寻找设备的MAC地址
- 目的主机ARP应答

![image-20250628173309452](C:\Users\LIYUFENG\AppData\Roaming\Typora\typora-user-images\image-20250628173309452.png)

![image-20250628173357332](C:\Users\LIYUFENG\AppData\Roaming\Typora\typora-user-images\image-20250628173357332.png)

**Linux下抓包叫 tcpdump**



## 网络层

- 让数据包走出广播域
- 路由，通过逐跳传播找到一条起点到终点的路径

![image-20250628174621582](C:\Users\LIYUFENG\AppData\Roaming\Typora\typora-user-images\image-20250628174621582.png)

### IP地址

IPV4 32位

IPV6 128位

![image-20250628180327553](C:\Users\LIYUFENG\AppData\Roaming\Typora\typora-user-images\image-20250628180327553.png)

### NAT技术

地址转换技术

![image-20250628183214489](C:\Users\LIYUFENG\AppData\Roaming\Typora\typora-user-images\image-20250628183214489.png)

其他保留IP地址

![image-20250628183741703](C:\Users\LIYUFENG\AppData\Roaming\Typora\typora-user-images\image-20250628183741703.png)



### IP数据报

![image-20250628191908505](C:\Users\LIYUFENG\AppData\Roaming\Typora\typora-user-images\image-20250628191908505.png)

### 分片和重组

- 以太网帧MTU上限比IP数据报长度上限小
- 来源网络层**分片**
- 目的主机网络层**重组**

![image-20250628192041392](C:\Users\LIYUFENG\AppData\Roaming\Typora\typora-user-images\image-20250628192041392.png)

### TTL的意义

time to live

![image-20250628191950158](C:\Users\LIYUFENG\AppData\Roaming\Typora\typora-user-images\image-20250628191950158.png)

### 路由器的原理

- 根据最长前缀去匹配

![image-20250628193109258](C:\Users\LIYUFENG\AppData\Roaming\Typora\typora-user-images\image-20250628193109258.png)

ICMP协议

![image-20250628194335545](C:\Users\LIYUFENG\AppData\Roaming\Typora\typora-user-images\image-20250628194335545.png)

### 传输层 TCP

