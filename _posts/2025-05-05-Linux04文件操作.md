# 文件

## 目录操作

获取当前工作目录

```
#include <unistd.h>
char *getcwd(char *buf, size_t size);
 
  #include <func.h>
 int main(void) {
    // char buf[10];
    // 由系统调用malloc，动态申请内存空间
    char* cwd = getcwd(NULL, 0);
    ERROR_CHECK(cwd, NULL, "getcwd");
    
    puts(cwd);
    // 由调用者负责释放申请的内存空间
    free(cwd);
    return 0;
 }
```

改变当前工作目录

```
#include <unistd.h>
int chdir(const char *path);

 #include <func.h>
 int main(int argc, char* argv[]) {
    // ./chdir dir
    ARGS_CHECK(argc, 2);
    
    char buf[256];
    getcwd(buf, SIZE(buf)); // 获取当前工作目录
    puts(buf);              // 打印当前工作目录
    
    int ret = chdir(argv[1]);   // 改变当前工作目录
    ERROR_CHECK(ret, -1, "chdir");
    getcwd(buf, SIZE(buf));
    puts(buf);
    
    return 0;
 }
```

创建目录

```
#include <sys/stat.h>
#include <sys/types.h>
int mkdir(const char *pathname, mode_t mode);

 #include <func.h>
 int main(int argc, char* argv[]) {
    // ./mkdir dir mode
    ARGS_CHECK(argc, 3);
    
    mode_t mode;
    sscanf(argv[2], "%o", &mode);
    // 创建的目录会受文件创建掩码的影响
    int ret = mkdir(argv[1], mode);
    ERROR_CHECK(ret, -1, "mkdir");
    
    return 0;
 }
```

改变目录权限

```
#include <sys/stat.h>
 int chmod(const char *pathname, mode_t mode);
 
  #include <func.h>
 int main(int argc, char* argv) {
    // ./chmod file mode
    ARGS_CHECK(argc, 3);
    mode_t mode;
    // 将字符串转换为整数
    sscanf(argv[2], "%o", &mode);
    
    int ret = chmod(argv[1], mode);
    ERROR_CHECK(ret, -1, "chmod");
    
    return 0;
 }
```

删除空目录

```
 #include <unistd.h>
 int rmdir(const char *pathname);
 
  #include <func.h>
 int main(int argc, char* argv[]) {
    // ./rmdir dir
    ARGS_CHECK(argc, 2);
    
    int ret = rmdir(argv[1]);
    ERROR_CHECK(ret, -1, "rmdir");
    
    return 0;
 }
```





## 目录流

文件流	目录流

fopen	opendir

fclose	closedir

fread	 readdir

fwrite   

ftell	    telldir

fseek	 seekdir

```

```

